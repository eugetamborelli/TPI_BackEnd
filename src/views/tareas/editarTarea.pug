doctype html
html
    head
        title Clínica Médica - Salud Integral
    body
        h1 Clínica Médica - Salud Integral
        h2 Gestión de Tareas
        br
        ul
            li
                a(href="/tareas/listado") Listado de Tareas
            li
                a(href="/tareas/nuevaTarea") Alta de Tareas
            li
                a(href="/tareas") Volver al Menú de Gestión de Tareas
        br

        h3 Edición de Tarea ID: #{tarea.id} 

        if error
            p(style="color:red")= error

        form(action=`/tareas/${tarea.id}?_method=PATCH` method="POST")
            
            - const getValue = (field) => formData[field] !== undefined ? formData[field] : (tarea[field] || '')

            //- Campos Obligatorios
            div
                label(for="titulo") Título: *
                input(type="text" name="titulo" required value=getValue('titulo') placeholder="Título de la tarea")

            div
                label(for="descripcion") Descripción: *
                textarea(name="descripcion" required placeholder="Detalles de la tarea...")= getValue('descripcion')

            div
                label(for="area") Área: *
                select(name="area" required)
                    option(value="") Seleccione un área
                    each areaVal in areas
                        - const selectedArea = getValue('area')
                        option(value=areaVal, selected=(selectedArea === areaVal))= areaVal.replace(/_/g, ' ').toUpperCase() 

            div
                label(for="estado") Estado: *
                select(name="estado" required)
                    option(value="") Seleccione un estado
                    each estadoVal in estados
                        - const selectedEstado = getValue('estado')
                        option(value=estadoVal, selected=(selectedEstado === estadoVal))= estadoVal.replace(/_/g, ' ').toUpperCase()

            div
                label(for="prioridad") Prioridad: *
                select(name="prioridad" required)
                    option(value="") Seleccione una prioridad
                    each prioVal in prioridades
                        - const selectedPrioridad = getValue('prioridad')
                        option(value=prioVal, selected=(selectedPrioridad === prioVal))
                        = prioVal.toUpperCase()
            
            //- Campos Opcionales
            
            div
                label(for="empleadoId") Empleado Asignado (ID):
                input(type="number" name="empleadoId" value=getValue('empleadoId') min="1" placeholder="ID del empleado")

            div
                label(for="pacienteId") Paciente Relacionado (ID):
                input(type="number" name="pacienteId" value=getValue('pacienteId') min="1" placeholder="ID del paciente")

            div
                label(for="proveedorId") Proveedor Relacionado (ID):
                input(type="number" name="proveedorId" value=getValue('proveedorId') min="1" placeholder="ID del proveedor")

            div
                label(for="fechaInicio") Fecha de Inicio (Planificada):
                input(type="date" name="fechaInicio" value=getValue('fechaInicio'))

            div
                label(for="fechaFin") Fecha de Finalización (Límite):
                input(type="date" name="fechaFin" value=getValue('fechaFin'))

            div
                label(for="observaciones") Observaciones:
                textarea(name="observaciones" placeholder="Notas adicionales...")= getValue('observaciones')

            br
            button(type="submit") Guardar Cambios